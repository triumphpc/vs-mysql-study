Таблица 1.1. Уровни изолированности ANSI SQL

|Уровень изоляции|Возможность чернового чтения|Возможность неповторяющегося чтения|Возможность фантомного чтения|Блокировка чтения|
|---|---|---|---|---|
|READ UNCOMMIТТED. На этом уровне изолированности транзакции могут видеть результаты незавершенных транзакций. Вы можете столкнуться с множеством проблем, если не знаете абсолютно точно, что делаете. Используйте этот уровень, только если у вас есть на то веские причины. На практике этот уровень применя­ ется редко, поскольку в этом случае производительность лишь немного выше, чем на других уровнях, имеющих множество преимуществ. Чтение незавершенных данных называют еще черновым, или ~грязным» чтением (dirty read).|Да|Да|Да|Нет|
|READ COMMITTED. Это уровень изолированности, который устанавливается по умолча­ нию в большинстве СУБД (но не в MySQL!). Он соответствует приведенному ранее простому определению изолированности: транзакция увидит только те изменения, которые к моменту ее начала подтверждены другими транзакциями, а произведен­ ные ею изменения останутся невидимыми для других транзакций, пока текущая не будет подтверждена. На этом уровне возможно так называемое неповторяющееся чтение (nonrepeataЫe read). Это означает, что вы можете выполнить одну и ту же команду дважды и получить разный результат.|Нет|Да|Да|Нет|
|REPEATABLE READ. Этот уровень изолированности позволяет решить проблемы, ко­ торые возникают на уровне READ UNСОММПТЕD. Он гарантирует, что любые строки, которые считываются транзакцией, будут выглядеть одинаково при последова­ тельных операциях чтения в пределах одной транзакции, однако теоретически на этом уровне возможна другая проблема, которая называется фантомным чтением (phantom reads). Проще говоря, фантомное чтение может произойти в случае, если вы выбираете некоторый диапазон строк, затем другая транзакция вставляет в него новую строку, после чего вы снова выбираете тот же диапазон. В результате вы увидите новую, фантомную строку. InnoDB и XtraDB решают проблему фантомного чтения с помощью многоверсионного управления конку­ рентным доступом (multiversion concurrency control), о котором мы расскажем далее в этой главе.|Нет|Нет|Да|Нет|
|SERIALIZABLE. Самый высокий уровень изолированности, который решает про­ блему фантомного чтения, заставляя транзакции выполняться в таком порядке, чтобы исключить возможность конфликта. Если коротко, уровень SERIALIZABLE блокирует каждую читаемую строку. На этом уровне может возникать множество задержек и конфликтов блокировок. Нам редко встречались люди, использующие этот уровень, но потребности вашего приложения могут заставить применять его, смирившись с меньшей степенью конкурентного доступа, но обеспечивая стабильность данных.|Нет|Нет|Нет|Да|



